<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Modified Calculator Example | IT 4403</title>
    <link rel="stylesheet" href="css/style.css" />

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"></script>

    <style>
        .form-grid{
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap:12px;
            max-width: 700px;
        }
        .form-grid label{ display: block; margin-bottom:6px;}
        .form-grid input, .form-grid select{
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #2a2a2a;
            background:#141414;
            color: #f5f5f5;
        }
        .full{grid-column: 1/-1;}
        .result{
            margin-top: 16px;
            padding: 12px;
            border-radius: 14px;
            border: 1px solid #2a2a2a;
            background: #141414;
        }
        .result strong {display: inline-block; min-width: 70px;}
        .hint{opacity: 0.9;}
    </style>
</head>

<body>
    <nav aria-label="Primary navigation">
        <a class="nav-btn" href="index.html">Home</a>
        <a class="nav-btn active" href="modified-calculator.html">Modified Calculator Example</a>
        <a class="nav-btn" href="picture-browser.html">Picture Browser Application</a>
        <a class="nav-btn" href="movie.html">Movie JSON Example</a>
    </nav>

    <main>
        <div class="card">
            <h1>Modified Calculator Example</h1>
            <p class="hint">
                Enter two numbers, choose an operation, and optionally choose a color for the result text.
            </p>
        
        <div class="form-grid" role="group" aria-label="Calculator Inputs">
        <div>
        <label for="numA">Number A</label>
        <input id="numA" type="text" inputmode="decimal" placeholder="e.g., 12.5"/>
        </div>

        <div>
            <label for="numB">Number B</label>
            <input id="numB" type="text" inputmode="decimal" placeholder="e.g., 3"/>
        </div>

        <div>
            <label for="op">Operation</label>
            <select id="op">
                <option value="+">Addition(+)</option>
                <option value="-">Subtraction(-)</option>
                <option value="*">Multiplication(*)</option>
                <option value="/">Division(/)</option>
            </select>
        </div>

        <div>
            <label for="colorName">Result Color(name or hex)</label>
            <input id="colorName" type="text" placeholder="e.g., gold or #d4af37"/>
        </div>

        <div class="full">
            <button class="nav-btn" id="clearBtn" type="button">Clear</button>
        </div>
    </div>

    <div class="result" aria-live="polite">
        <p>
            <strong>Result:</strong>
            <span id="resultValue">-</span>
        </p>
        <p id="statusMsg" class="hint">Type values tp calculate automatically.</p>
    </div>
</div>
</main>

<script>
    $(function(){
        const $a = $('#numA');
        const $b = $('#numB');
        const $op = $('#op');
        const $color = $('#colorName');
        const $result = $('#resultValue'); 
        const $status = $('#statusMsg');

        function parseNumber(value){
            const cleaned = String(value).replace(/,/g,"").trim();
            const num= Number(cleaned);
            return Number.isFinite(num) ? num: null;
        }

        function isColorValid(value){
            const s = new Option().style;
            s.color = value;
            return s.color !== '';
        }

        function calc(){
            const n1 = parseNumber($a.val());
            const n2 = parseNumber($b.val());
            const op = $op.val();
            const colorVal = $color.val().trim();

            $result.css("color","");
            $result.css("font-weight" , "");

            if(n1 === null || n2 === null){
                $result.text("-");
                $status.text("Enter valid numbers in both boxes.");
                return;
            }

            let out;

            if (op === "/" && n2 === 0){
                out = "Error: cannot divide by 0";
                $status.text("Fix number B to a non-zero value for division.");
                $result.css("font-weight","700");
            } else {
                switch(op){
                    case "+": out = n1 + n2; break;
                    case "-": out = n1 - n2; break;
                    case "*": out = n1 * n2; break;
                    case "/": out = n1 / n2; break;
                    default: out = "Unknown operation";
                }
                $status.text("Calculated successfully.");
            }

            $result.text(out);

            if(colorVal.length > 0){
                if(isColorValid(colorVal)){
                    $result.css("color", colorVal);
                } else {
                    $status.text("Color not recognized. Try a name like 'red' or hex like '#d4af37'.");
                }
            }
        }
        $a.on("input", calc);
        $b.on("input", calc);
        $op.on("change", calc);
        $color.on("input", calc);

        $('#clearBtn').on("click", function(){
            $a.val("");
            $b.val("");
            $op.val("+");
            $color.val("");
            calc();
            $a.trigger("focus");
        });
        calc();
        });
        </script>
    </body>
</html>